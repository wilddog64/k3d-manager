# --- OpenLDAP chart defaults (johanneskastl-openldap-bitnami) ---

replicaCount: 1

image:
  repository: "${LDAP_IMAGE_REPOSITORY}"
  pullPolicy: "${LDAP_IMAGE_PULL_POLICY}"
  tag: "${LDAP_IMAGE_TAG}"

# Populated by ESO -> Secret (Vault-sourced credentials)
envFrom:
  - secretRef:
      name: "${LDAP_ADMIN_SECRET_NAME}"

# Skip Bitnami's sample tree only when a custom LDIF secret is mounted
skip_default_tree_generation: false

mount_ldif_secret:
  enabled: false
  secretName: ""

tls_enabled: true

serviceAccount:
  create: true
  annotations: {}
  name: ""

service:
  type: "ClusterIP"
  ports:
    ldap-tcp:
      enabled: true
      port: ${LDAP_PORT}
      protocol: TCP
      targetPort: 1389
    ldap-udp:
      enabled: false
      port: ${LDAP_PORT}
      protocol: UDP
      targetPort: 1389
    ldaps-tcp:
      enabled: true
      port: ${LDAP_TLS}
      protocol: TCP
      targetPort: 1636
    ldaps-udp:
      enabled: false
      port: ${LDAP_TLS}
      protocol: UDP
      targetPort: 1636

podAnnotations:
  sidecar.istio.io/inject: "false"

resources:
  requests:
    cpu: "${LDAP_REQ_CPU}"
    memory: "${LDAP_REQ_MEM}"
  limits:
    memory: "${LDAP_LIMIT_MEM}"
