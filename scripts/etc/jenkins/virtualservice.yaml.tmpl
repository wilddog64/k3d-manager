# jenkins/virtualservice.yaml
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: jenkins
  namespace: "${JENKINS_NAMESPACE}"
spec:
  gateways:
    - istio-system/jenkins-gw
  hosts:
${JENKINS_VIRTUALSERVICE_HOSTS_YAML}
  http:
    - match:
        - uri: { prefix: "/" }
      route:
        - destination:
            host: "jenkins.${JENKINS_NAMESPACE}.svc.cluster.local"
            port: { number: 8081 }          # Service port (â†’ pod :8080)
